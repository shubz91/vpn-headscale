############################################
# Core
############################################

server_url: http://vpn.abherifintech.publicvm.com
listen_addr: 0.0.0.0:8080

############################################
# Database (NEW FORMAT - REQUIRED)
############################################

database:
  type: sqlite
  sqlite:
    path: /var/lib/headscale/headscale.db

############################################
# Logging
############################################

log:
  level: info
  format: text

############################################
# Keys
############################################

private_key_path: /var/lib/headscale/private.key

noise:
  private_key_path: /var/lib/headscale/noise_private.key

############################################
# IP Allocation (NEW FORMAT - REQUIRED)
############################################

prefixes:
  v4: 100.64.0.0/10
  v6: fd7a:115c:a1e0::/48

############################################
# DERP
############################################

derp:
  server:
    enabled: false

  urls:
    - https://controlplane.tailscale.com/derpmap/default

  paths: []

  auto_update_enabled: true
  update_frequency: 24h

############################################
# DNS
############################################

dns:
  override_local_dns: true

  nameservers:
    global:
      - 1.1.1.1
      - 8.8.8.8

  magic_dns: true
  base_domain: abherifintech.com

############################################
# FOR ZOHO LOGIN
############################################

oidc:
  enabled: true
  issuer: "https://accounts.zoho.com"
  client_id: "${ZOHO_OIDC_CLIENT_ID}"
  client_secret: "${ZOHO_OIDC_CLIENT_SECRET}"
  redirect_uri: "https://vpn.abherifintech.publicvm.com/oidc/callback"

  # Required scopes for Zoho
  scope:
    - "openid"
    - "email"
    - "ZohoProfile.user.READ"

  # Zoho OIDC endpoints
  auth_url: "https://accounts.zoho.in/oauth/v2/auth"
  token_url: "https://accounts.zoho.in/oauth/v2/token"
  userinfo_url: "https://accounts.zoho.in/oauth/user/info"

  # Optional
  allowed_domains:
    - "https://vpn.abherifintech.publicvm.com"

############################################
# For Headplane
############################################

unix_socket: /var/run/headscale/headscale.sock
unix_socket_permissions: "0770"
